function PostService(n,t){var i=n("",{},{posts:{method:"POST",url:"/api/post-list"},createPost:{method:"POST",url:"api/create-post"}});return{posts:function(){var n=t.defer();return i.posts({},{},function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise},createPost:function(n){var r=t.defer();return i.createPost({},n,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise}}}function PostListController(n,t){t.posts().then(function(t){n.posts=t.posts})}function PostNewController(n,t){n.editorOptions={mode:"gfm",styleActiveLine:!0,lineNumbers:!0,lineWrapping:!0};n.postBodyChanged=function(){window.searchTime!=null&&window.clearTimeout(searchTime);window.searchTime=window.setTimeout(function(){n.post.htmlBody=marked(n.post.body);n.$apply()},200)};n.create=function(){if(n.post.title==null||n.post.title.length==0){alert("填写文章标题");return}if(n.post.ename==null||n.post.title.ename==0){alert("填写文章路径");return}if(n.post.body==null||n.post.body.length==0){alert("请填写正文");return}var i=n.post;t.createPost(i).then(function(n){console.log(n)})}}var route=function(n,t){t.when("","/welcome").when("/","/welcome");n.state("app",{url:"/",views:{header:{templateUrl:"/scripts/views/view_header.html"},menu:{templateUrl:"/scripts/views/view_menu.html"},"main-body":{template:"<div ui-view><div>"}}});n.state("app.welcome",{url:"welcome",templateUrl:"/scripts/views/view_welcome.html"});n.state("app.post",{});n.state("app.post.post-list",{url:"post-list",templateUrl:"/scripts/views/view_post_list.html",controller:PostListController});n.state("app.post.post-new",{url:"post-new",templateUrl:"/scripts/views/view_post_new.html",controller:PostNewController})},app=angular.module("app",["ngResource","ui.router","ui.bootstrap","ui.codemirror"]);app.config(route);app.service("PostService",["$resource","$q",PostService]);